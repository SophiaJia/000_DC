library(readr)
eg_long <- read_csv("testdata/eg_long.csv")


##try [[//d]] pertentional number 


text_filter_cell <- function(x){
  #input : string
  #output : text, number, mix
  #date variable consider as mix 
  options(warn=-1)
  y = "mix"
  if(is.na(x)) y = NA #csv file can recognize NA 
  else if(!grepl("[^A-Za-z]", x)) y = "text"
  else if (!is.na(as.numeric(x))) y = "number"
  y
}

#testing
letters <- "abc"
numbers <- "12.3"
mix <- "b1dd"
tmp <- eg_long$WBRT.dose
tmp2 <- paste(eg_long$WBRT.dose, eg_long$Pathology)


text_filter_cell(letters)
text_filter_cell(numbers)
text_filter_cell(mix)
text_filter_cell(tmp2[7])
text_filter_cell("32;")

### text a column
text_filter_pre <- function(x){
  #input : a column
  #output, check the percentage of text, number, mix in this column
  table(sapply(Dtest$tnpr,text_filter_cell), useNA ="always")/length(Dtest$tnpr)
}

%>%

tmp <- eg_long$WBRT.dose
tmp2 <- eg_long$date.of.first.systemic.metastases

table(sapply(tmp,text_filter_cell))
table(sapply(Dtest$tnpr,text_filter_cell), useNA ="always")
table(sapply(Dtest$tnpr,text_filter_cell), useNA ="always")/length(Dtest$tnpr)

# if number then , consider as number 
# if no mix and no number then consider as text
# if mix and no number 
# 









